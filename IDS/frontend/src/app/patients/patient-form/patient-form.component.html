<div class="form-container">
  <div class="form-header">
    <h2>{{ isEditMode ? 'Editar Paciente' : 'Nuevo Paciente' }}</h2>
    <a routerLink="/patients" class="btn-close">✕</a>
  </div>

  <form (ngSubmit)="onSubmit()" #patientForm="ngForm" *ngIf="!loading">
    <div class="form-grid">
      <div class="form-group">
        <label for="first_name">Nombre *</label>
        <input
          type="text"
          id="first_name"
          name="first_name"
          [(ngModel)]="patient.first_name"
          required
          class="form-control"
          placeholder="Ingrese el nombre"
        />
      </div>

      <div class="form-group">
        <label for="last_name">Apellido *</label>
        <input
          type="text"
          id="last_name"
          name="last_name"
          [(ngModel)]="patient.last_name"
          required
          class="form-control"
          placeholder="Ingrese el apellido"
        />
      </div>

      <div class="form-group">
        <label for="email">Email *</label>
        <input
          type="email"
          id="email"
          name="email"
          [(ngModel)]="patient.email"
          required
          email
          class="form-control"
          placeholder="correo@ejemplo.com"
        />
      </div>

      <div class="form-group">
        <label for="phone">Teléfono</label>
        <input
          type="tel"
          id="phone"
          name="phone"
          [(ngModel)]="patient.phone"
          class="form-control"
          placeholder="+57 300 123 4567"
        />
      </div>

      <div class="form-group">
        <label for="age">Edad</label>
        <input
          type="number"
          id="age"
          name="age"
          [(ngModel)]="patient.age"
          min="0"
          max="150"
          class="form-control"
          placeholder="25"
        />
      </div>

      <div class="form-group">
        <label for="gender">Género</label>
        <select id="gender" name="gender" [(ngModel)]="patient.gender" class="form-control">
          <option [ngValue]="undefined">Seleccione...</option>
          <option value="M">Masculino</option>
          <option value="F">Femenino</option>
          <option value="Other">Otro</option>
        </select>
      </div>

      <div class="form-group">
        <label for="blood_type">Tipo de Sangre</label>
        <input
          type="text"
          id="blood_type"
          name="blood_type"
          [(ngModel)]="patient.blood_type"
          class="form-control"
          placeholder="A+, O-, etc."
        />
      </div>

      <div class="form-group">
        <label for="status">Estado *</label>
        <select id="status" name="status" [(ngModel)]="patient.status" required class="form-control">
          <option value="active">Activo</option>
          <option value="inactive">Inactivo</option>
        </select>
      </div>

      <div class="form-group full-width">
        <label for="address">Dirección</label>
        <textarea
          id="address"
          name="address"
          [(ngModel)]="patient.address"
          rows="3"
          class="form-control"
          placeholder="Dirección completa del paciente"
        ></textarea>
      </div>
    </div>

    <div class="form-actions">
      <button type="button" (click)="cancel()" class="btn btn-secondary" [disabled]="submitting">
        Cancelar
      </button>
      <button type="submit" class="btn btn-primary" [disabled]="!patientForm.form.valid || submitting">
        {{ submitting ? 'Guardando...' : (isEditMode ? 'Actualizar' : 'Crear') }}
      </button>
    </div>
  </form>

  <div *ngIf="loading" class="loading">Cargando paciente...</div>
</div>
